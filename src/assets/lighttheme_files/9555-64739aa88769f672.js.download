!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0e2199d7-f86f-49b6-9778-8901a6b306ae",e._sentryDebugIdIdentifier="sentry-dbid-0e2199d7-f86f-49b6-9778-8901a6b306ae")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9555],{64979:function(e,t,r){r.d(t,{$m:function(){return x},C0:function(){return y},D:function(){return z},Db:function(){return l},EQ:function(){return f},F4:function(){return T},H$:function(){return h},IS:function(){return R},Iu:function(){return d},Kq:function(){return p},Nc:function(){return I},OI:function(){return s},PF:function(){return o},RJ:function(){return E},S3:function(){return u},Vj:function(){return m},W$:function(){return N},YT:function(){return c},Zq:function(){return C},Zv:function(){return b},_R:function(){return D},cm:function(){return n},e5:function(){return _},f3:function(){return v},os:function(){return a},p3:function(){return i},u4:function(){return k},vl:function(){return O},wK:function(){return w},wj:function(){return S},wy:function(){return g},xQ:function(){return P}}),r(12976).p;let n="download_after_removing_bg",o="copy_after_removing_bg",i="edit_after_removing_bg",a="ai_tool_removebg",l="download_after_change_ethnicity",u="ai_tool_expand",c="ai_tool_expand_after_download",s="ai_tool_expand_carousel",d="ai_tool_expand_removebg",_="ai_tool_expand_download_popover",f="ai_tool_retouch",p="ai_tool_retouch_download_popover",g="ai_tool_retouch_after_download",m="ai_tool_reimagine",w="ai_tool_reimagine_download_popover",v="ai_tool_reimagine_after_download",h="ai_tool_upscaler",b="ai_tool_replacebg",y="ai_tool_all",k="ai_tool_all_thumbnail",I="ai_tool_adjust",N="ai_tool_video",R="ai_tool_generate_style_ref",T="ai_tool_generate_prompt",x="ai_tool_assistant",E="edit_tools_onboarding_v2",O="edit_tools_onboarding",P=["replacebg","video","generatePrompt","styleReference"],C=["tint","grain","presets"],D=2e3,S=15,z="resource_detail"},32671:function(e,t,r){r.d(t,{a:function(){return w}});var n=r(52983),o=r(33843),i=r(43186),a=r(33247),l=r(15082),u=r(64979),c=r(94608),s=r(52753);let d={retouch:{resource_detail:u.EQ,download_popover:u.Kq,attribution:u.wy},expand:{resource_detail:u.S3,attribution:u.YT,carousel:u.OI,removebg:u.Iu,download_popover:u.e5},reimagine:{resource_detail:u.Vj,download_popover:u.wK,attribution:u.f3,resource_detail_hover:u.Vj},adjust:{resource_detail:u.Nc,resource_detail_hover:u.Nc},replacebg:{resource_detail:u.Zv},video:{resource_detail:u.W$,resource_detail_hover:u.W$},assistant:{resource_detail:u.$m},generatePrompt:{resource_detail:u.F4},styleReference:{resource_detail:u.IS},workflow:{resource_detail:u.$m,modifier:"workflow_create_post"}},_=e=>{var t,r,o;let{tool:u,subOption:_,resourceData:f,location:p="resource_detail"}=e,{id:g,name:m,author:w,type:v,isAIGenerated:h,premium:b,url:y,preview:k}=f,I=(0,a.R)(),N="resource_detail"===p?(0,s.d)(b,u,_):p,R=I({...(0,c.W)(u,_),type:v,authorName:w.name,isPremium:b,isAIGenerated:h,eventName:"thumbnail_ai_tools"===p?"ai_gen__thumbnail":"ai_gen"}),{handleDownload:T}=(0,l.i)({resource:{id:g,name:m,author:w,premium:b,regularType:v,isAIGenerated:h,url:y,preview:k},action:null!==(o=null===(t=d[null!=u?u:"all"])||void 0===t?void 0:t[p])&&void 0!==o?o:"download",modifier:null===(r=d[u])||void 0===r?void 0:r.modifier,showAttributionModal:!1,location:N,checkoutQueryParams:R}),x=(0,i.J)();return(0,n.useCallback)(async(e,t)=>{let r=await T(e,t);if(!(null==r?void 0:r.signedUrl))throw Error("Failed to download image");return x(),r.signedUrl},[T,x])},f={styleReference:"ai-image-generator",generatePrompt:"ai-image-generator",video:"ai-video-generator",assistant:"assistant",adjust:"image-editor",reimagine:"reimagine",expand:"image-editor",retouch:"image-editor",replacebg:"image-editor"},p={video:"startFrame",generatePrompt:"image_prompt",styleReference:"image_style_ref"},g=e=>{var t;return null!==(t=p[e])&&void 0!==t?t:"image"},m={replacebg:"background"},w=e=>{let{resourceData:t,imageUrl:r,tool:o,location:i,subOption:a}=e,{preview:{url:l},name:u,type:c,author:{name:s},premium:d,isAIGenerated:f}=t,p="/pikaso",m=b(o,a),w=_({tool:o,location:i,resourceData:t});return(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null!=r?r:l,n=await w(t);r||(t="".concat(n).concat(n.includes("?")?"&":"?","w=2000"));let _=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[t,r]=e;r&&_.set(t,r)}),o&&_.set("tool",h(o,a));let v=g(o);_.set(v,t),_.set("title",u),_.set("location",null!=i?i:"resource_detail"),_.set("item_type",c),_.set("item_author",s),_.set("is_premium_item",d?"true":"false"),_.set("is_ai_generated",f?"true":"false");let b=window.open("about:blank");b?b.location.href="".concat(p,"/").concat(m,"?").concat(_):document.location.href="".concat(p,"/").concat(m,"?").concat(_)},[s,w,l,r,f,i,u,d,a,o,m,c])},v={createSocialPostWithText:{url:"assistant",tool:"assistant"},createSocialPostWithoutText:{url:"image-editor",tool:"expand"}},h=(e,t)=>{var r;return"workflow"===e&&(0,o.BP)(t)?v[t].tool:null!==(r=m[e])&&void 0!==r?r:e},b=(e,t)=>"workflow"===e&&(0,o.BP)(t)?v[t].url:f[e]},42997:function(e,t,r){r.d(t,{i:function(){return d}});var n=r(41937),o=r(65122),i=r(90312),a=r(85229),l=r(52983),u=r(65724),c=r(64979),s=r(35845);let d=e=>{let{tool:t,subOption:r,resourceData:c,checkoutQueryParams:d}=e,f=(0,n.I)(),p=(0,s.e)(t),g=(0,o.e)(),{setLoginCookies:m,signUpUrl:w}=(0,i.e)(),v=(0,u.W)(c.id),h=(null==c?void 0:c.premium)||!1,b=g||!h,{isUserWinback:y,showWinbackModal:k}=(0,a.l)();return(0,l.useCallback)(()=>y?(k(),!0):(!b||!p)&&(f&&b&&!_(t,r)?(m(),window.location.href=w):v({resourceData:{name:null==c?void 0:c.name,mediaUrl:c.preview.url,mediaWidth:c.preview.width,mediaHeight:c.preview.height,resourceType:"regular"},checkoutQueryParams:d}),!0),[y,b,p,f,t,r,v,null==c?void 0:c.name,c.preview.url,c.preview.width,c.preview.height,d,k,m,w])},_=(e,t)=>c.xQ.includes(e)||t&&c.Zq.includes(t)},35845:function(e,t,r){r.d(t,{C:function(){return d},e:function(){return c}});var n=r(11645),o=r(41937),i=r(2394),a=r(18444),l=r(8147),u=r(52983);let c=e=>d()(e),s={removebg:"freepik-tools-integration-remove-bg",retouch:"pikaso-edition",expand:"pikaso-edition",reimagine:"pikaso-reimagine",replacebg:"pikaso-bg-replacer",video:"pikaso-video-kling",ethnicity:"freepik-tools-integration-ethnicity",generatePrompt:"pikaso-tti",styleReference:"pikaso-tti",assistant:"pikaso-edition"},d=()=>{let e=(0,l.H)(),t=(0,o.I)(),r=(0,a.w)(),c=(0,i.E)(),d=(0,n.u)(),_=null==e?void 0:e.permissions;return(0,u.useCallback)(e=>{let n=s[e];if(c)return!n||d(n);if(!_)return!1;let{canUseIA:o}=_,i=o&&!t,a=i&&!r;return({replacebg:i&&a,retouch:i,removebg:i,expand:i,reimagine:i,adjust:!t,video:i&&a,ethnicity:i,generatePrompt:i&&a,styleReference:i&&a,assistant:i,workflow:i})[e]},[c,_,t,r,d])}},33843:function(e,t,r){r.d(t,{BP:function(){return s},Hg:function(){return _},Us:function(){return o},Zq:function(){return u},bE:function(){return a},yS:function(){return p}});let n=["pixel-art","illustration","surreal","comic","fantasy","anime","digital-art","vintage","photo","all-styles"],o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.includes(e)},i=["1:1","1:2","2:1","2:3","3:4","4:5","9:16","3:2","4:3","16:9","custom"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.includes(e)},l=["crop","light","color","tint","grain","rotate","presets"],u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l.includes(e)},c=["createSocialPostWithText","createSocialPostWithoutText"],s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c.includes(e)},d=["south-asian","middle-eastern","east-asian","hispanic-latin","southeast-asian","black","white","mixed"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d.includes(e)},f=["remove","insert"],p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.includes(e)}},94608:function(e,t,r){r.d(t,{W:function(){return a}});var n=r(33843);let o={video:"ai_video_generator",ethnicity:"change",adjust:"adjust",reimagine:"reimagine",expand:"expand",removebg:"background",retouch:"retouch",replacebg:"background",generatePrompt:"ai_image_generator",styleReference:"ai_image_generator",assistant:"assistant",workflow:"assistant"},i=(e,t)=>"removebg"===e?"remove":"replacebg"===e?"replace":"reimagine"===e&&(0,n.Us)(t)?"all-styles"===t?"style":"style__".concat(t):"expand"===e&&(0,n.bE)(t)?"aspect_ratio__".concat(t):"adjust"===e&&(0,n.Zq)(t)?t:"ethnicity"===e?(0,n.Hg)(t)?"ethnicity__".concat(t):"ethnicity":"retouch"===e&&(0,n.yS)(t)?t:"generatePrompt"===e?"prompt__image_reference":"styleReference"===e?"style__image_reference":"workflow"===e&&(0,n.BP)(t)?"workflow__create_post":"ai_gen",a=(e,t)=>({tool:o[e],eventName:i(e,t),businessLine:"ai_tools,content"})},52753:function(e,t,r){r.d(t,{d:function(){return n}});let n=(e,t,r)=>"resource_detail".concat(e?"":"_free","_").concat(null!=t?t:"ai_tools").concat(r?"_".concat(r):"")},15715:function(e,t,r){r.d(t,{H:function(){return o}});let n=e=>{let{resource:t,file:r,option:n,size:o,action:i,walletId:a,locale:l,modifier:u}=e,c=new URLSearchParams;return c.set("resource","".concat(t)),r&&n?(c.set("file",r),c.set("option","".concat(n))):o&&c.set("size","".concat(o)),i&&c.set("action",i),a&&c.set("walletId",a),c.set("locale",l),u&&c.set("modifier",u),c.toString()},o=async e=>{let t=n(e),r=await fetch("/api/regular/download?".concat(t));return r.ok?{success:!0,data:await r.json()}:429===r.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===r.status||403===r.status||405===r.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===r.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}}},15082:function(e,t,r){r.d(t,{i:function(){return C}});var n=r(72234),o=r(9324),i=r(68147),a=r(85229),l=r(87420),u=r(61158),c=r(52983),s=r(52240),d=r(35576),_=r(7526);let f=(e,t)=>t||("photo"===e?"jpg":"zip");var p=r(49737);r(97458);let g=(0,c.createContext)(null),m=()=>(0,c.useContext)(g)||{shouldTrackingLog:!0};var w=r(15715),v=r(32509),h=r(59916),b=r(72118),y=r(1850),k=r(64979),I=r(56879);let N=y.z.enum(["download","copy","edit","prompt","preview","remove_background","remove_background_edit","ai_video",k.cm,k.PF,k.p3,k.EQ,k.Kq,k.Vj,k.wK,k.os,k.S3,k.H$,k.C0,k.u4,k.YT,k.OI,k.Iu,k.e5,k.f3,k.wy,k.Nc,k.Zv,k.Db,k.W$,k.$m,k.F4,k.IS]),R=y.z.enum(["workflow_create_post"]);y.z.object({resource:y.z.coerce.number(),file:I.ru.optional(),option:y.z.coerce.number().optional(),size:y.z.coerce.number().optional(),action:N.optional(),modifier:R.optional(),walletId:y.z.string().nullable().optional(),locale:y.z.string()}),y.z.object({data:y.z.object({filename:y.z.string(),url:y.z.string(),prompt:y.z.string().optional(),signed_url:y.z.string().optional()})}).transform(e=>{let{data:t}=e;return t}).transform(e=>{let{signed_url:t,...r}=e;return{...r,signedUrl:t}});let T=y.z.array(y.z.string()),x=new Date(new Date().getTime()+48e4),E=b.Z.withConverter({write:e=>e}),O=e=>{try{let t=E.get(e);if(!t)return[];return T.parse(JSON.parse(t))}catch(e){return[]}},P=()=>{let e=(0,i.I)(),t=(0,h.b)();return(0,c.useCallback)(r=>{if(!e)return;let n="".concat("ck_items_").concat(e),o=O(n),i="".concat(r);if(!o.includes(i)){let e=JSON.stringify([...o,i]);E.set(n,e,{path:"/",domain:t,expires:x})}},[e,t])},C=e=>{let{resource:t,file:r,action:g="download",modifier:h,location:b="resource_detail",option:y,size:k,showAttributionModal:I=!0,handleError:N,checkoutQueryParams:R}=e,{id:T,name:x,author:E,premium:O,regularType:C,isAIGenerated:D,url:S}=t,[z,W]=(0,c.useState)(!1),{isUserWinback:j,showWinbackModal:U}=(0,a.l)(),{showAttribution:H}=(0,p.tc)(),$=P(),A=(0,v.b)({resource:t,location:b}),F=(0,d.mS)(),{shouldTrackingLog:L}=m(),{showDeviceBlockedModal:K,isDeviceBlocked:Z}=(0,o.qx)(),q=(0,n.Lh)(),J=(0,i.I)(),Q=(0,l.ZK)(),B=(0,s.TH)({file_extension:f(C,r),file_name:x,file_id:T,license:O?"premium":"free",resolution:k?_.w8[k]:"original",style:"na",author_name:E.name,category:D?"ai_image":C,action:"prompt"===g?"view_prompt":g,location:b,url_link:S}),V=(0,c.useCallback)(e=>{if(N){N(e);return}"prompt"!==g&&A(e,R)},[N,g,A,R]);return{handleDownload:(0,c.useCallback)(async(e,t)=>{if(Z){K();return}if(j){U();return}W(!0),q||u.uT("WARNING: User ".concat(J," has no wallet_id"),"warning"),L&&F({resourceId:T,isResourcePremium:O,resourceType:C,downloadType:g,fileType:C,variant:b});let n=await (0,w.H)({resource:T,size:k?2e3:void 0,action:g,modifier:h,file:r,option:y,walletId:q,locale:Q});if(n.success)return I&&H&&H(),W(!1),$(T),B({externalUrl:null!=e?e:S,setting:t}),n.data;V(n),W(!1)},[Z,j,q,T,k,g,r,y,Q,V,K,U,J,I,H,$,L,B,S,F,O,C,b]),isDownloading:z}}},32509:function(e,t,r){r.d(t,{b:function(){return l}});var n=r(19170),o=r(10893),i=r(52983),a=r(65724);let l=e=>{var t;let{location:r,resource:l}=null!=e?e:{},{t:u}=(0,o.$G)("error"),{openToast:c}=(0,n.x_)(),s=(0,a.W)(null!==(t=null==l?void 0:l.id)&&void 0!==t?t:0,"",r);return(0,i.useCallback)((e,t)=>{if("DOWNLOAD_LIMIT_REACHED"===e.data&&l){s({resourceData:{name:l.name,mediaUrl:l.preview.url,mediaWidth:l.preview.width,mediaHeight:l.preview.height,resourceType:"regular"},checkoutQueryParams:t,modalType:"downloadLimit",origin:"download_limit"});return}if("AUTHENTICATION_ERROR"===e.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===e.data&&c({type:"danger",message:u("notFound")}),"UNKNOWN_ERROR"===e.data&&c({type:"danger",message:u("unknown")})},[s,c,l,u])}},64237:function(e,t,r){r.d(t,{y:function(){return o}});var n=r(5704);let o=e=>{let{isEditableInMockup:t,isEditableInWepik:r}=e,o=(0,n.Jn)("type");return"illustration"===o?"illustration":t||"mockup"===o?"mockup":r||"template"===o?"template":void 0}},11645:function(e,t,r){r.d(t,{u:function(){return i}});var n=r(52983),o=r(8147);let i=()=>{let e=(0,o.H)();return(0,n.useCallback)(t=>{if(!e)return!0;try{let r=e.disabledPermissionsTools;if(!r)return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:"Disabled permissions tools not found"})),!0;return!(t in r)}catch(r){return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:r})),!0}},[e])}},2394:function(e,t,r){r.d(t,{E:function(){return o}});var n=r(8147);let o=()=>{let e=(0,n.H)();return!!(null==e?void 0:e.profile.isEnterprise)}}}]);